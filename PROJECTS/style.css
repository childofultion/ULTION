:root{
  --bg1:#f7fbff;
  --bg2:#e6f3ff;
  --card-w:220px;
  --card-h:300px;
}

*{
  box-sizing:border-box;
  margin:0;
  padding:0;
}

html,body{
  width:100%;
  height:100dvh; /* fix iOS toolbar */
  overflow:hidden;
  background:linear-gradient(180deg,var(--bg1),var(--bg2));
  font-family:"Segoe UI",system-ui,-apple-system,"Helvetica Neue",Arial;
}

/* --- Scene centered --- */
.scene{
  position:absolute;
  top:50%;
  left:50%;
  width:100vw;
  height:100dvh;
  transform:translate(-50%,-50%);
  perspective:1100px;
}

/* --- Carousel --- */
.carousel{
  width:900px;
  height:420px;
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  transform-style:preserve-3d;
  transition:transform 600ms cubic-bezier(.2,.85,.2,1);
  cursor:grab;
  touch-action:none;
}

.carousel.dragging{
  cursor:grabbing;
  transition:none;
}

/* --- Cards --- */
.card{
  position:absolute;
  width:var(--card-w);
  height:var(--card-h);
  left:50%;
  top:50%;
  transform-origin:center center;
  border-radius:14px;
  overflow:hidden;
  backface-visibility:hidden;
  user-select:none;
  box-shadow:0 18px 40px rgba(5,15,30,0.18);
  transition:transform .3s, filter .2s, opacity .2s;
}
.card img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}

.card.center{
  transform:translate3d(0,0,420px) scale(1.15)!important;
  z-index:999;
  filter:contrast(1.06) saturate(1.08);
}
.card.side{
  opacity:.6;
  filter:brightness(.94);
}
.card.far{
  opacity:.2;
  filter:blur(1.5px) brightness(.88);
}

/* --- Light vignette --- */
body::before{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  background:radial-gradient(80% 70% at 50% 30%, rgba(0,0,0,0.05), transparent 60%);
  mix-blend-mode:multiply;
}

/* --- Floor glow (desktop only) --- */
.floor{
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  bottom:12%;
  width:min(82%,980px);
  height:100px;
  pointer-events:none;
  background:radial-gradient(50% 45%, rgba(120,180,240,0.18), transparent 50%);
  filter:blur(14px);
  mix-blend-mode:screen;
}

/* --- Lightbox video overlay --- */
.lightbox{
  position:fixed; inset:0;
  display:none;
  z-index:9999;
}
.lightbox.active{
  display:block;
}
.lightbox-backdrop{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,0.75);
  backdrop-filter:blur(6px);
}
.lightbox-dialog{
  position:absolute;
  left:50%; top:50%;
  transform:translate(-50%,-50%);
  width:min(900px, 92vw);
  background:#000;
  border-radius:14px;
  overflow:hidden;
}
.lightbox video{
  width:100%; height:auto; display:block;
}
.lightbox-close{
  position:absolute;
  top:12px; right:12px;
  width:40px; height:40px;
  border:none;
  border-radius:50%;
  background:#fff;
  font-size:20px;
  cursor:pointer;
  z-index:3;
}

/* --- Back button --- */
.back-min{
  position:fixed;
  top:18px; left:18px;
  z-index:2000;
  color:#fff;
  font:700 14px/1 Tahoma;
  text-decoration:none;
  text-transform:lowercase;
  opacity:.92;
  text-shadow:0 0 6px rgba(0,0,0,.7);
}
.back-min:hover{
  opacity:1;
  transform:translateX(-2px);
}

/* ✅ Final Mobile Fix */
@media(max-width:600px){

  :root{
    --card-w:70vw;
    --card-h:46vh;
  }

  .carousel{
    width:100vw !important;
    height:75vh !important;
  }

  .scene{
    perspective:900px;
  }

  .card.center{
    transform:translate3d(0,0,360px) scale(1.25)!important;
  }

  .card.side{
    opacity:.35;
  }

  .card.far{
    opacity:.15;
  }

  .floor{
    display:none;
  }

  .back-min{
    font-size:15px;
    top:14px;
    left:14px;
  }
}

/* Ultra small phones */
@media(max-width:380px){
  :root{
    --card-w:76vw;
    --card-h:42vh;
  }
}/* ✅ Final alignment fix for iPhones */
@media (max-width: 600px) {

  .carousel {
    transform: translate(-55%, -48%) !important;
  }

  .card.center {
    transform: translate3d(0, -2vh, 370px) scale(1.22) !important;
  }
}

/* Extra-small screens */
@media (max-width: 380px) {
  .carousel {
    transform: translate(-56%, -46%) !important;
  }
}